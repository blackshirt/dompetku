{% extends "../base.html" %}
{% block content %}
<div class="container">
    <div class="row">
        <button class="btn btn-default btn-sm" data-toggle="modal" data-target="#rating-modal"> Create</button>
    </div>
</div>

<div class="container">
    {% for item in data %}
    <form action="/news/{{item.mid}}/delete" method="post">
    {% module xsrf_form_html() %}
    <input type=hidden name="mid" value="{{ item.mid}}"></>

    <div class="list-group">
        <div class="media">
            <a href="#" class="pull-left">
                <img src="{{ static_url("images/news.png")}}" class="media-object img-circle img-responsive" alt="Sample Image">
            </a>
            <div class="media-body">
                <h4 class="media-heading">{{ item.title}}</h4>
                <p>{{ item.body }}</p>
                <h5><p><small><i>Posted by :</i> {{ item.author.name }} on {{item.created }} </small></p></h5>
                <p>
                    <button type=submit class="btn btn-link btn-sm"><i class="glyphicon glyphicon-trash"></i></button>
                </p>
            </div>

        </div>
    </div>

    </form>

    {% end %}

</div>

<div class="modal fade" id="rating-modal" tabindex="-1" role="dialog" aria-labelledby="rating-modal-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã— </button>
                <h4 class="modal-title" id="ratingmodallabel"> <b>Input new message info </b> </h4>
            </div>
            <div class="modal-body">
                <form id="news-form" class="form-horizontal well" data-async data-target="#rating-modal" action="{{request.path}}" method="post">
                    <div class="form-group has-success">{{ _("Title") }}
                        <input class="form-control" placeholder="Title berita ...." type="text" name="title"/>
                    </div>

                    <div class="form-group has-success">{{ _("Body") }}
                        <textarea class="form-control" rows="4" name="body" placeholder="Placeholder for contents...."></textarea>
                    </div>

                    <div class="form-group has-success">{{ _("Created") }}
                        <input name="created" class="input-appends date" data-date-format="yyyy-mm-dd hh:mm:ss" id="datetimepicker" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-sm" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <button form="news-form" class="btn btn-default btn-sm" type="submit">Submit</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



{% end %}

{% block script %}
<script type="text/javascript">
jQuery(function($) {
    $('form[data-async]').on('submit', function(event) {
        var $form = $(this);
        var $target = $($form.attr('data-target'));

        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),

            success: function(data, status) {
                $target.modal('hide');
            }
        });

        event.preventDefault();
    });
});
 </script>

<script type="text/javascript">
$(function () {
    $('#datetimepicker').datetimepicker({
        pickTime : false,
        });
});
</script>

{% end %}
