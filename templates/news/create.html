{% extends "../base.html" %}

{% block title %}New Message : {% end %}

{% block content %}
<!-- Bootstrap trigger to open modal -->
<a data-toggle="modal" href="#rating-modal">Write a Review</a>


        <!-- Modal -->
<div class="modal fade" id="rating-modal" tabindex="-1" role="dialog" aria-labelledby="rating-modal-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã— </button>
                <h4 class="modal-title" id="ratingmodallabel"> <b>Input new message info </b> </h4>
            </div>
            <div class="modal-body">
                <form id="rating-form" class="form-horizontal well" data-async data-target="#rating-modal" action="{{request.path}}" method="post">
                    <div class="form-group has-success">{{ _("Title") }}
                        <input class="form-control" placeholder="Title berita ...." type="text" name="title"/>
                    </div>

                    <div class="form-group has-success">{{ _("Body") }}
                        <textarea class="form-control" rows="4" name="body" placeholder="Placeholder for contents...."></textarea>
                    </div>

                    <div class="form-group has-success">{{ _("Created") }}
                        <input name="created" class="input-appends date" data-date-format="yyyy-mm-dd hh:mm:ss" id="datetimepicker" />
                        <span class="add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                <button form="rating-form" class="btn btn-primary" type="submit">Submit changes</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


{% module xsrf_form_html() %}
{% end %}



{% block script %}
<script type="text/javascript">
jQuery(function($) {
    $('form[data-async]').on('submit', function(event) {
        var $form = $(this);
        var $target = $($form.attr('data-target'));

        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),

            success: function(data, status) {
                $target.modal('hide');
            }
        });

        event.preventDefault();
    });
});
 </script>
<script type="text/javascript">
$(function () {
    $('#datetimepicker').datetimepicker({
        pickTime : false
        });
});
</script>
{% end %}
