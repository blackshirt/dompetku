{% extends "../base.html" %}

{% block title %}New transaksi : {% end %}

{% block content %}
{% autoescape None %}

<form action={{ request.path }} method="post" id="form-transaksi" name="form-transaksi">
    <div id="type-transaksi" class="frm">
        <fieldset>
            <legend>Choose your category:</legend>
            <div class="form-group">
                {{ form.memo.label(class_="control-label") }}
                <div class="col-lg-6">
                    {{ form.memo(class_="form-control") }}
                </div>
            
              <div class="col-lg-10 col-lg-offset-2">
                  <button class="btn btn-primary open1" type="button">Next <span class="fa fa-arrow-right"></span></button> 
              </div>
            </div>
        </fieldset>
    </div>

    <div style="display:none" id="info-amount-transaksi" class="frm">
        <fieldset>
            <legend>Info dan Harga:</legend>
            <div class="form-group">
                {{ form.amount.label(class_="control-label") }}
                <div class="col-lg-6">
                    {{ form.amount(class_="form-control number") }}
                </div>
            </div>
            <div class="form-group">
                {{ form.info.label(class_="control-label") }}
                <div class="col-lg-6">
                    {{ form.info(class_="form-control") }}
                </div>
            </div>

            <div class="clearfix" style="height: 10px;clear: both;"></div>
 
            <div class="form-group">
              <div class="col-lg-10 col-lg-offset-2">
                <!-- back2 unique class name  -->
                <button class="btn btn-warning back2" type="button"><span class="fa fa-arrow-left"></span> Back</button> 
                <!-- open2 unique class name -->
                <button class="btn btn-primary open2" type="button">Finish <span class="fa fa-arrow-right"></span></button> 
                <img src="spinner.gif" alt="" id="loader" style="display: none">
              </div>
            </div>
        </fieldset>
    </div>

    {% module xsrf_form_html() %}
</form>
{% end %}

{% block script %}
<script type="text/javascript">
    $(function () {
        $('input.number').autoNumeric();
        });

$('form').submit(function(){
    var form = $(this);
    $('input').each(function(i){
        var self = $(this);
        try{
            var v = self.autoNumeric('get');
            self.autoNumeric('destroy');
            self.val(v);
        }catch(err){
            console.log("Not an autonumeric field: " + self.attr("name"));
        }
    });
    return true;
});

</script>

<script type="text/javascript">
jQuery().ready(function() {
 
  var v = $("#transaksi-form").bootstrapValidator({
      feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            info: {
                validators: {
                    notEmpty: {
                        message: 'The title is required'
                    }
                }
            },
            amount: {
                validators: {
                    notEmpty: {
                        message: 'The body is required'
                    }
                }
            },
            memo: {
                validators : {
                    notEmpty: {
                        message: 'Created is required'
                    }
                }
            }
        }
    })
});
</script>

<script type="text/javascript">
jQuery().ready(function() {
 
  // Binding next button on first step
  $(".open1").click(function() {
     
        $(".frm").hide("fast");
        $("#info-amount-transaksi").show("slow");
      
   });
 
     // Binding back button on second step
    $(".back2").click(function() {
      $(".frm").hide("fast");
      $("#type-transaksi").show("slow");
    });
 
    $(".open2").click(function() {
      if (v.form()) {
        // optional
        // used delay form submission for a seccond and show a loader image
        $("#loader").show();
         setTimeout(function(){
           $("#transaksi-form").html('<h2>Thanks for your time.</h2>');
         }, 1000);
        // Remove this if you are not using ajax method for submitting values
        return false;
      }
    });
});
</script>
{% end %}

